(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{502:function(t,s,a){"use strict";a.r(s);var n=a(4),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"linux"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#linux"}},[t._v("#")]),t._v(" Linux")]),t._v(" "),a("h3",{attrs:{id:"设置阿里云centos-镜像"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#设置阿里云centos-镜像"}},[t._v("#")]),t._v(" 设置阿里云CentOS 镜像")]),t._v(" "),a("ol",[a("li",[t._v("备份")])]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("mv")]),t._v(" /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.backup\n")])])]),a("ol",{attrs:{start:"2"}},[a("li",[t._v("下载新的 CentOS-Base.repo 到 /etc/yum.repos.d/\nCentOS 7")])]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" -o /etc/yum.repos.d/CentOS-Base.repo https://mirrors.aliyun.com/repo/Centos-7.repo\n")])])]),a("p",[t._v("CentOS 8")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" -o /etc/yum.repos.d/CentOS-Base.repo https://mirrors.aliyun.com/repo/Centos-8.repo\n")])])]),a("ol",[a("li",[t._v("运行 "),a("code",[t._v("yum makecache")]),t._v(" 生成缓存")]),t._v(" "),a("li",[t._v("其他\n非阿里云ECS用户会出现 Couldn't resolve host 'mirrors.cloud.aliyuncs.com' 信息，不影响使用。用户也可自行修改相关配置: eg:")])]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sed")]),t._v(" -i -e "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/mirrors.cloud.aliyuncs.com/d'")]),t._v(" -e "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/mirrors.aliyuncs.com/d'")]),t._v(" /etc/yum.repos.d/CentOS-Base.repo\n")])])]),a("h2",{attrs:{id:"php"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#php"}},[t._v("#")]),t._v(" Php")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"http://laravel-china.github.io/php-the-right-way/",target:"_blank",rel:"noopener noreferrer"}},[t._v("php the right way"),a("OutboundLink")],1)])]),t._v(" "),a("h2",{attrs:{id:"nginx"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#nginx"}},[t._v("#")]),t._v(" Nginx")]),t._v(" "),a("blockquote",[a("p",[t._v("laravel 官方 推荐nginx配置")])]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("server "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 监听 HTTP 协议默认的 [80] 端口。")]),t._v("\n    listen "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("80")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 绑定主机名 [example.com]。")]),t._v("\n    server_name example.com"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 服务器站点根目录 [/example.com/public]。")]),t._v("\n    root /example.com/public"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 添加几条有关安全的响应头；与 Google+ 的配置类似，详情参见文末。")]),t._v("\n    add_header X-Frame-Options "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"SAMEORIGIN"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    add_header X-XSS-Protection "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1; mode=block"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    add_header X-Content-Type-Options "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"nosniff"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 站点默认页面；可指定多个，将顺序查找。")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 例如，访问 http://example.com/ Nginx 将首先尝试「站点根目录/index.html」是否存在，不存在则继续尝试「站点根目录/index.htm」，以此类推...")]),t._v("\n    index index.html index.htm index.php"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 指定字符集为 UTF-8")]),t._v("\n    charset utf-8"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Laravel 默认重写规则；删除将导致 Laravel 路由失效且 Nginx 响应 404。")]),t._v("\n    location / "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        try_files "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$uri")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$uri")]),t._v("/ /index.php?"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$query_string")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 关闭 [/favicon.ico] 和 [/robots.txt] 的访问日志。")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 并且即使它们不存在，也不写入错误日志。")]),t._v("\n    location "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" /favicon.ico "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" access_log off"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" log_not_found off"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    location "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" /robots.txt  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" access_log off"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" log_not_found off"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 将 [404] 错误交给 [/index.php] 处理，表示由 Laravel 渲染美观的错误页面。")]),t._v("\n    error_page "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("404")]),t._v(" /index.php"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# URI 符合正则表达式 [\\.php$] 的请求将进入此段配置")]),t._v("\n    location ~ "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v(".php$ "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 配置 FastCGI 服务地址，可以为 IP:端口，也可以为 Unix socket。")]),t._v("\n        fastcgi_pass unix:/var/run/php/php7.2-fpm.sock"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 配置 FastCGI 的主页为 index.php。")]),t._v("\n        fastcgi_index index.php"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 配置 FastCGI 参数 SCRIPT_FILENAME 为 $realpath_root$fastcgi_script_name。")]),t._v("\n        fastcgi_param SCRIPT_FILENAME "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$realpath_root")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$fastcgi_script_name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 引用更多默认的 FastCGI 参数。")]),t._v("\n        include fastcgi_params"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 通俗地说，以上配置将所有 URI 以 .php 结尾的请求，全部交给 PHP-FPM 处理。")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 除符合正则表达式 [/\\.(?!well-known).*] 之外的 URI，全部拒绝访问")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 也就是说，拒绝公开以 [.] 开头的目录，[.well-known] 除外")]),t._v("\n    location ~ /"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("."),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("?"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("well-known"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(".* "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        deny all"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h2",{attrs:{id:"mysql"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mysql"}},[t._v("#")]),t._v(" Mysql")]),t._v(" "),a("h3",{attrs:{id:"允许远程连接mysql数据库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#允许远程连接mysql数据库"}},[t._v("#")]),t._v(" 允许远程连接mysql数据库")]),t._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("grant")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("all")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("privileges")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("on")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("to")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'root'")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@'%'")]),t._v(" identified "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("by")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'123456'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("with")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("grant")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("option")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" flush "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("privileges")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])])}),[],!1,null,null,null);s.default=e.exports}}]);